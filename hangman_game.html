<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Hangman Game</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Poppins', Arial, sans-serif;
            text-align: center;
            margin: 0;
            padding: 20px;
            min-height: 100vh;
            background: linear-gradient(135deg, #6e48aa, #9d50bb);
            background-size: 200% 200%;
            animation: gradientShift 15s ease infinite;
            color: #fff;
            overflow-x: hidden;
        }
        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        #game-container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            max-width: 800px;
            margin: auto;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        #game-header {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
        }
        #game-header img {
            width: 40px;
            height: 40px;
        }
        h1 {
            font-size: 2.5em;
            font-weight: 700;
            margin: 0;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }
        #hangman-svg {
            width: 250px;
            height: 250px;
            margin: 20px auto;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            padding: 10px;
        }
        #hangman-svg.pulse {
            animation: svgPulse 0.5s;
        }
        @keyframes svgPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        .hangman-part {
            stroke: #ffd700;
            stroke-width: 5;
            fill: none;
            stroke-linecap: round;
            stroke-dasharray: 1000;
            stroke-dashoffset: 1000;
            transition: stroke-dashoffset 0.5s ease-in-out, stroke 0.3s, transform 0.3s;
        }
        .hangman-part.visible {
            stroke-dashoffset: 0;
            stroke: #ff4444;
            animation: bouncePart 0.3s;
        }
        @keyframes bouncePart {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
        .shake {
            animation: shake 0.3s;
        }
        #word-display {
            font-size: 30px;
            margin: 20px 0;
            letter-spacing: 8px;
            font-weight: 600;
            color: #ffd700;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
        }
        #word-display span {
            display: inline-block;
            transition: transform 0.3s, opacity 0.3s;
        }
        #word-display span.reveal {
            animation: spinIn 0.5s;
        }
        @keyframes spinIn {
            from { transform: translateY(20px) rotate(360deg); opacity: 0; }
            to { transform: translateY(0) rotate(0deg); opacity: 1; }
        }
        #word-display.glow {
            text-shadow: 0 0 20px rgba(255, 215, 0, 0.8);
        }
        #guessed-letters, #score, #timer, #achievements {
            margin: 10px 0;
            font-size: 18px;
            color: #e0e0e0;
        }
        #score {
            transition: transform 0.3s;
        }
        #score.increment {
            animation: scoreIncrement 0.5s;
        }
        @keyframes scoreIncrement {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }
        #achievements span {
            display: inline-block;
            animation: popIn 0.5s;
        }
        @keyframes popIn {
            0% { transform: scale(0); opacity: 0; }
            70% { transform: scale(1.2); opacity: 1; }
            100% { transform: scale(1); }
        }
        #message {
            font-size: 20px;
            margin: 15px 0;
            color: #ff4444;
            text-shadow: 0 0 5px rgba(255, 68, 68, 0.5);
        }
        #message.bounce {
            animation: messageBounce 0.5s;
        }
        @keyframes messageBounce {
            0% { transform: translateY(-20px); opacity: 0; }
            50% { transform: translateY(10px); }
            100% { transform: translateY(0); opacity: 1; }
        }
        #game-options {
            margin: 20px 0;
            display: none; /* Hide the difficulty and category options */
        }
        select, button {
            padding: 10px;
            font-size: 16px;
            border-radius: 8px;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        select {
            background: rgba(255, 255, 255, 0.2);
            color: #fff;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        button {
            background: linear-gradient(45deg, #4CAF50, #66bb6a);
            color: white;
            border: none;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
            transform: scale(1.1);
        }
        button:disabled {
            background: #cccccc;
            cursor: not-allowed;
            box-shadow: none;
        }
        #letter-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(40px, 1fr));
            gap: 5px;
            max-width: 600px;
            margin: 20px auto;
        }
        #letter-buttons button {
            width: 40px;
            height: 40px;
            font-size: 18px;
            background: linear-gradient(45deg, #2196f3, #42a5f5);
            border-radius: 8px;
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        #letter-buttons button:hover {
            transform: scale(1.1);
            animation: none;
        }
        #letter-buttons button:disabled {
            background: #444;
            color: #888;
            animation: none;
        }
        #letter-buttons button.bounce {
            animation: bounce 0.3s;
        }
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }
        #progress-bar {
            width: 250px;
            height: 25px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 12px;
            margin: 15px auto;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        #progress {
            height: 100%;
            background: linear-gradient(45deg, #4CAF50, #81c784);
            transition: width 0.5s ease-in-out, background 0.3s;
            animation: fill 0.5s ease-in-out;
        }
        @keyframes fill {
            from { width: 0%; }
            to { width: inherit; }
        }
        #progress.low {
            background: linear-gradient(45deg, #ff4444, #ff7777);
        }
        #canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }
        .tooltip {
            position: relative;
        }
        .tooltip::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.8);
            color: #fff;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 14px;
            white-space: nowrap;
            opacity: 0;
            transition: opacity 0.2s;
            pointer-events: none;
        }
        .tooltip:hover::after {
            opacity: 1;
        }
        @media (max-width: 600px) {
            #game-container {
                padding: 15px;
            }
            h1 {
                font-size: 2em;
            }
            #word-display {
                font-size: 24px;
                letter-spacing: 6px;
            }
            #letter-buttons {
                grid-template-columns: repeat(auto-fit, minmax(35px, 1fr));
            }
            #letter-buttons button {
                width: 35px;
                height: 35px;
                font-size: 16px;
            }
        }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>
    <div id="game-container">
        <div id="game-header">
            <img src="https://img.icons8.com/ios-filled/50/ffffff/hangman.png" alt="Hangman Icon">
            <h1>Hangman</h1>
        </div>
        <div id="score">Score: 0 | High Score: 0</div>
        <div id="timer">Time: 0s</div>
        <div id="achievements">Achievements: None</div>
        <div id="game-options">
            <label for="level">Difficulty:</label>
            <select id="level">
                <option value="easy">Easy (4-5 letters, 7 lives)</option>
                <option value="medium">Medium (6-7 letters, 6 lives)</option>
                <option value="hard">Hard (8-9 letters, 5 lives)</option>
                <option value="veryhard">Very Hard (10-12 letters, 4 lives)</option>
                <option value="extreme">Extreme (13+ letters, 3 lives)</option>
            </select>
            <label for="category">Category:</label>
            <select id="category">
                <option value="tech">Tech</option>
                <option value="animals">Animals</option>
                <option value="movies">Movies</option>
            </select>
            <button class="tooltip" data-tooltip="Begin game" onclick="startGame()">Start Game</button>
        </div>
        <div id="progress-bar"><div id="progress"></div></div>
        <svg id="hangman-svg">
            <g transform="translate(20,20) scale(0.8)">
                <line x1="0" y1="200" x2="140" y2="200" class="hangman-part" id="base"/>
                <line x1="70" y1="20" x2="70" y2="200" class="hangman-part" id="pole"/>
                <line x1="70" y1="20" x2="140" y2="20" class="hangman-part" id="top"/>
                <line x1="140" y1="20" x2="140" y2="40" class="hangman-part" id="rope"/>
                <circle cx="140" cy="60" r="20" class="hangman-part" id="head"/>
                <line x1="140" y1="80" x2="140" y2="120" class="hangman-part" id="body"/>
                <line x1="140" y1="80" x2="120" y2="100" class="hangman-part" id="left-arm"/>
                <line x1="140" y1="80" x2="160" y2="100" class="hangman-part" id="right-arm"/>
                <line x1="140" y1="120" x2="120" y2="160" class="hangman-part" id="left-leg"/>
                <line x1="140" y1="120" x2="160" y2="160" class="hangman-part" id="right-leg"/>
            </g>
        </svg>
        <div id="word-display"></div>
        <div id="guessed-letters">Guessed Letters: </div>
        <div id="message"></div>
        <div id="letter-buttons" style="display: none;"></div>
        <button id="hint-button" class="tooltip" data-tooltip="Reveal a letter (costs lives, max 2)" onclick="getHint()" style="display: none;">Hint</button>
        <button id="music-button" class="tooltip" data-tooltip="Toggle background music" onclick="toggleMusic()" style="display: none;">Play Music</button>
        <button class="tooltip" data-tooltip="Start a new game" onclick="resetGame()">New Game</button>
    </div>

    <script>
        const wordLists = {
            tech: {
                easy: ['CODE', 'GAME', 'PLAY', 'DATA', 'WORD'],
                medium: ['PYTHON', 'SCRIPT', 'HANGMAN', 'CODING', 'PIXEL'],
                hard: ['JAVASCRIPT', 'ALGORITHM', 'DATABASE', 'NETWORK', 'CODING'],
                veryhard: ['PROGRAMMING', 'ENCRYPTION', 'INTERFACE', 'RECURSION', 'COMPILER'],
                extreme: ['OBJECTORIENTED', 'MACHINELEARNING', 'CRYPTOGRAPHY', 'DISTRIBUTEDSYSTEMS', 'NEURALNETWORK']
            },
            animals: {
                easy: ['LION', 'TIGER', 'BEAR', 'WOLF', 'DEER'],
                medium: ['ELEPHANT', 'GIRAFFE', 'CHEETAH', 'PANTHER', 'DOLPHIN'],
                hard: ['CROCODILE', 'RHINOCEROS', 'HIPPOPOTAMUS', 'CHAMELEON', 'KANGAROO'],
                veryhard: ['BALDEAGLE', 'GIANTPANDA', 'BLUEWHALE', 'KOMODODRAGON', 'SNOWLEOPARD'],
                extreme: ['AFRICANWILDDOG', 'GALAPAGOSTORTOISE', 'SIBERIANTIGER', 'ARCTICWOLVERINE', 'AMAZONIANMANATEE']
            },
            movies: {
                easy: ['STAR', 'WARS', 'LION', 'KING', 'TOYS'],
                medium: ['MATRIX', 'AVATAR', 'TITANIC', 'JURASSIC', 'FROZEN'],
                hard: ['INCEPTION', 'GLADIATOR', 'GODFATHER', 'SHAWSHANK', 'PARASITE'],
                veryhard: ['INTERSTELLAR', 'FORRESTGUMP', 'PULPFICTION', 'FIGHTCLUB', 'BACKTOFUTURE'],
                extreme: ['LORDOFTHERINGS', 'SCHINDLERSLIST', 'THEEMPIRESTRIKESBACK', 'RETURN OFTHEKING', 'DARKKNIGHTRises']
            }
        };

        const maxLives = { easy: 7, medium: 6, hard: 5, veryhard: 4, extreme: 3 };
        const scoreValues = { easy: 10, medium: 20, hard: 30, veryhard: 50, extreme: 100 };
        const hintPenalties = { easy: 1, medium: 1, hard: 2, veryhard: 2, extreme: 3 };
        const maxHints = 2;

        let selectedWord = '';
        let guessedLetters = [];
        let wrongGuesses = 0;
        let hintsUsed = 0;
        let currentLevel = 'easy'; // Default to easy
        let currentCategory = 'tech'; // Default to tech
        let score = 0;
        let highScore = localStorage.getItem('hangmanHighScore') || 0;
        let lives = 0;
        let startTime = 0;
        let timerInterval = null;
        let achievements = JSON.parse(localStorage.getItem('hangmanAchievements')) || [];
        let winStreak = 0;

        const correctSound = new Audio('https://www.soundjay.com/buttons/sounds/button-09.mp3');
        const wrongSound = new Audio('https://www.soundjay.com/buttons/sounds/button-10.mp3');
        const winSound = new Audio('https://www.soundjay.com/human/sounds/applause-01.mp3');
        const loseSound = new Audio('https://www.soundjay.com/human/sounds/crowd-boo-1.mp3');
        const bgMusic = new Audio('https://www.soundjay.com/ambient/sounds/ambient-background-01.mp3');
        bgMusic.loop = true;

        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        let particles = [];

        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();

        function createParticles(x, y, isWin) {
            const colors = isWin ? ['76,175,80', '255,235,59', '33,150,243'] : ['255,68,68'];
            for (let i = 0; i < (isWin ? 100 : 50); i++) {
                const color = isWin ? colors[Math.floor(Math.random() * colors.length)] : '255,68,68';
                particles.push({
                    x, y,
                    vx: (Math.random() - 0.5) * 10,
                    vy: (Math.random() - 0.5) * 10,
                    radius: Math.random() * 6 + 3,
                    color,
                    alpha: 1,
                    decay: Math.random() * 0.015 + 0.01,
                    isConfetti: isWin && Math.random() > 0.7,
                    rotation: Math.random() * 360
                });
            }
        }

        function animateParticles() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            particles = particles.filter(p => p.alpha > 0);
            particles.forEach(p => {
                p.x += p.vx;
                p.y += p.vy;
                p.alpha -= p.decay;
                p.rotation = p.isConfetti ? p.rotation + 5 : p.rotation;
                ctx.save();
                ctx.translate(p.x, p.y);
                ctx.rotate((p.rotation * Math.PI) / 180);
                ctx.beginPath();
                if (p.isConfetti) {
                    ctx.rect(-p.radius, -p.radius / 2, p.radius * 2, p.radius);
                } else {
                    ctx.arc(0, 0, p.radius, 0, Math.PI * 2);
                }
                ctx.fillStyle = `rgba(${p.color}, ${p.alpha})`;
                ctx.fill();
                ctx.restore();
            });
            if (particles.length > 0) requestAnimationFrame(animateParticles);
        }

        function startGame() {
            selectedWord = wordLists[currentCategory][currentLevel][Math.floor(Math.random() * wordLists[currentCategory][currentLevel].length)];
            guessedLetters = [];
            wrongGuesses = 0;
            hintsUsed = 0;
            lives = maxLives[currentLevel];
            startTime = Date.now();
            if (timerInterval) clearInterval(timerInterval);
            timerInterval = setInterval(updateTimer, 1000);
            const gameOptions = document.getElementById('game-options');
            if (gameOptions) gameOptions.style.display = 'none';
            const letterButtons = document.getElementById('letter-buttons');
            if (letterButtons) letterButtons.style.display = 'grid';
            const hintButton = document.getElementById('hint-button');
            if (hintButton) {
                hintButton.style.display = 'inline';
                hintButton.disabled = false;
            }
            const musicButton = document.getElementById('music-button');
            if (musicButton) musicButton.style.display = 'inline';
            updateLetterButtons();
            updateDisplay(true);
        }

        function updateTimer() {
            const elapsed = Math.floor((Date.now() - startTime) / 1000);
            const timerElement = document.getElementById('timer');
            if (timerElement) timerElement.textContent = `Time: ${elapsed}s`;
        }

        function updateLetterButtons() {
            const container = document.getElementById('letter-buttons');
            if (!container) return;
            container.innerHTML = '';
            'ABCDEFGHIJKLMNOPQRSTUVWXYZ'.split('').forEach(letter => {
                const button = document.createElement('button');
                button.textContent = letter;
                button.onclick = () => {
                    button.classList.add('bounce');
                    setTimeout(() => button.classList.remove('bounce'), 300);
                    guessLetter(letter);
                };
                if (guessedLetters.includes(letter)) button.disabled = true;
                container.appendChild(button);
            });
        }

        function updateDisplay(animate = false) {
            const parts = ['base', 'pole', 'top', 'rope', 'head', 'body', 'left-arm', 'right-arm', 'left-leg', 'right-leg'];
            parts.forEach((part, index) => {
                const element = document.getElementById(part);
                if (!element) return;
                if (index < wrongGuesses) {
                    if (animate && index === wrongGuesses - 1) {
                        setTimeout(() => {
                            element.classList.add('visible');
                            element.classList.add('shake');
                            document.getElementById('hangman-svg').classList.add('pulse');
                            setTimeout(() => {
                                element.classList.remove('shake');
                                document.getElementById('hangman-svg').classList.remove('pulse');
                            }, 300);
                        }, index * 100);
                    } else {
                        element.classList.add('visible');
                    }
                } else {
                    element.classList.remove('visible');
                }
            });

            let displayWord = '';
            let newLetterRevealed = false;
            for (let letter of selectedWord) {
                if (guessedLetters.includes(letter) && !displayWord.includes(letter)) newLetterRevealed = true;
                displayWord += `<span class="${guessedLetters.includes(letter) && animate ? 'reveal' : ''}">${guessedLetters.includes(letter) ? letter : '_'}</span> `;
            }
            const wordDisplay = document.getElementById('word-display');
            if (wordDisplay) {
                wordDisplay.innerHTML = displayWord.trim();
                if (animate && newLetterRevealed) {
                    wordDisplay.classList.add('glow');
                    setTimeout(() => wordDisplay.classList.remove('glow'), 500);
                }
            }

            const guessedLettersElement = document.getElementById('guessed-letters');
            if (guessedLettersElement) {
                guessedLettersElement.textContent = 
                    'Guessed Letters: ' + (guessedLetters.length > 0 ? guessedLetters.join(', ') : 'None');
            }
            const progressElement = document.getElementById('progress');
            if (progressElement) {
                progressElement.style.width = `${((lives - wrongGuesses) / lives) * 100}%`;
                progressElement.classList.toggle('low', (lives - wrongGuesses) / lives <= 0.3);
            }
            const scoreElement = document.getElementById('score');
            if (scoreElement) {
                scoreElement.textContent = `Score: ${score} | High Score: ${highScore} | Lives: ${lives - wrongGuesses}`;
            }

            let message = '';
            if (wrongGuesses >= lives) {
                message = `Game Over! The word was ${selectedWord}.`;
                createParticles(window.innerWidth / 2, window.innerHeight / 2, false);
                animateParticles();
                loseSound.play().catch(() => {});
                clearInterval(timerInterval);
                winStreak = 0;
                endGame();
            } else if (selectedWord.split('').every(letter => guessedLetters.includes(letter))) {
                const timeBonus = Math.max(0, 60 - Math.floor((Date.now() - startTime) / 1000));
                const oldScore = score;
                score += scoreValues[currentLevel] * (lives - wrongGuesses) + timeBonus;
                highScore = Math.max(highScore, score);
                localStorage.setItem('hangmanHighScore', highScore);
                if (score > oldScore) {
                    scoreElement.classList.add('increment');
                    setTimeout(() => scoreElement.classList.remove('increment'), 500);
                }
                winStreak++;
                checkAchievements();
                message = 'Congratulations! You won!';
                createParticles(window.innerWidth / 2, window.innerHeight / 2, true);
                animateParticles();
                winSound.play().catch(() => {});
                clearInterval(timerInterval);
                endGame();
            }
            const messageElement = document.getElementById('message');
            if (messageElement) {
                messageElement.textContent = message;
                if (message) {
                    messageElement.classList.add('bounce');
                    setTimeout(() => messageElement.classList.remove('bounce'), 500);
                }
            }
        }

        function checkAchievements() {
            const newAchievements = [];
            if (winStreak >= 3 && !achievements.includes('Streak Master')) newAchievements.push('Streak Master');
            if (score >= 500 && !achievements.includes('High Scorer')) newAchievements.push('High Scorer');
            if (wrongGuesses === 0 && selectedWord.length >= 8 && !achievements.includes('Perfect Game')) newAchievements.push('Perfect Game');
            if (newAchievements.length > 0) {
                achievements.push(...newAchievements);
                localStorage.setItem('hangmanAchievements', JSON.stringify(achievements));
                const achievementsElement = document.getElementById('achievements');
                if (achievementsElement) {
                    achievementsElement.innerHTML = `Achievements: ${achievements.map(a => `<span>${a}</span>`).join(', ') || 'None'}`;
                }
            }
        }

        function guessLetter(letter) {
            if (guessedLetters.includes(letter)) {
                const messageElement = document.getElementById('message');
                if (messageElement) {
                    messageElement.textContent = 'You already guessed that letter!';
                    messageElement.classList.add('bounce');
                    setTimeout(() => messageElement.classList.remove('bounce'), 500);
                }
                return;
            }

            guessedLetters.push(letter);
            const isWrong = !selectedWord.includes(letter);
            if (isWrong) {
                wrongGuesses++;
                wrongSound.play().catch(() => {});
            } else {
                correctSound.play().catch(() => {});
            }
            updateLetterButtons();
            updateDisplay(isWrong);
        }

        function getHint() {
            const hintButton = document.getElementById('hint-button');
            if (hintsUsed >= maxHints) {
                const messageElement = document.getElementById('message');
                if (messageElement) {
                    messageElement.textContent = 'No more hints available!';
                    messageElement.classList.add('bounce');
                    setTimeout(() => messageElement.classList.remove('bounce'), 500);
                }
                if (hintButton) hintButton.disabled = true;
                return;
            }
            const unguessed = selectedWord.split('').filter(l => !guessedLetters.includes(l));
            if (unguessed.length > 0) {
                const hintLetter = unguessed[Math.floor(Math.random() * unguessed.length)];
                guessedLetters.push(hintLetter);
                wrongGuesses += hintPenalties[currentLevel];
                hintsUsed++;
                if (hintsUsed >= maxHints && hintButton) hintButton.disabled = true;
                updateLetterButtons();
                updateDisplay(true);
                const messageElement = document.getElementById('message');
                if (messageElement) {
                    messageElement.textContent = `Hint: Added letter ${hintLetter} (${maxHints - hintsUsed} hints left)`;
                    messageElement.classList.add('bounce');
                    setTimeout(() => messageElement.classList.remove('bounce'), 500);
                }
            }
        }

        function endGame() {
            const letterButtons = document.getElementById('letter-buttons');
            const hintButton = document.getElementById('hint-button');
            if (letterButtons) letterButtons.style.display = 'none';
            if (hintButton) hintButton.style.display = 'none';
        }

        function toggleMusic() {
            const musicButton = document.getElementById('music-button');
            if (!musicButton) return;
            if (bgMusic.paused) {
                bgMusic.play().catch(() => {});
                musicButton.textContent = 'Pause Music';
            } else {
                bgMusic.pause();
                musicButton.textContent = 'Play Music';
            }
        }

        function resetGame() {
            const gameOptions = document.getElementById('game-options');
            const letterButtons = document.getElementById('letter-buttons');
            const hintButton = document.getElementById('hint-button');
            const musicButton = document.getElementById('music-button');
            if (gameOptions) gameOptions.style.display = 'none';
            if (letterButtons) letterButtons.style.display = 'none';
            if (hintButton) {
                hintButton.style.display = 'none';
                hintButton.disabled = false;
            }
            if (musicButton) {
                musicButton.style.display = 'none';
                musicButton.textContent = 'Play Music';
            }
            const messageElement = document.getElementById('message');
            if (messageElement) messageElement.textContent = '';
            const wordDisplay = document.getElementById('word-display');
            if (wordDisplay) wordDisplay.textContent = '';
            const guessedLettersElement = document.getElementById('guessed-letters');
            if (guessedLettersElement) guessedLettersElement.textContent = 'Guessed Letters: ';
            const progressElement = document.getElementById('progress');
            if (progressElement) {
                progressElement.style.width = '100%';
                progressElement.classList.remove('low');
            }
            const scoreElement = document.getElementById('score');
            if (scoreElement) scoreElement.textContent = `Score: ${score} | High Score: ${highScore} | Lives: 0`;
            const timerElement = document.getElementById('timer');
            if (timerElement) timerElement.textContent = 'Time: 0s';
            const parts = ['base', 'pole', 'top', 'rope', 'head', 'body', 'left-arm', 'right-arm', 'left-leg', 'right-leg'];
            parts.forEach(part => {
                const element = document.getElementById(part);
                if (element) element.classList.remove('visible');
            });
            if (timerInterval) clearInterval(timerInterval);
            bgMusic.pause();
            particles = [];
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            startGame(); // Automatically start a new game with default settings
        }

        const achievementsElement = document.getElementById('achievements');
        if (achievementsElement) {
            achievementsElement.innerHTML = `Achievements: ${achievements.map(a => `<span>${a}</span>`).join(', ') || 'None'}`;
        }
        const scoreElement = document.getElementById('score');
        if (scoreElement) {
            scoreElement.textContent = `Score: ${score} | High Score: ${highScore} | Lives: 0`;
        }

        document.addEventListener('keydown', (event) => {
            if (/^[A-Za-z]$/.test(event.key)) {
                const letter = event.key.toUpperCase();
                const button = Array.from(document.querySelectorAll('#letter-buttons button')).find(btn => btn.textContent === letter);
                if (button && !button.disabled) {
                    button.classList.add('bounce');
                    setTimeout(() => button.classList.remove('bounce'), 300);
                    guessLetter(letter);
                }
            }
        });

        // Start the game automatically with default settings
        startGame();
    </script>
</body>
</html>